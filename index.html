<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Лелуш: Сайт о Коде Гиасс</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        margin: 0;
        padding: 0;
        width: 100%;
        min-height: 100vh;
        background-color: rgba(88, 8, 167, 1);
        overflow-x: hidden; /* ИЗМЕНЕНО: запрещаем горизонтальный скролл */
        overflow-y: auto;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        display: flex;
        flex-direction: column;
      }

      /* =================== ОБЩИЕ СТИЛИ =================== */
      .page {
        position: relative;
        width: 100%;
        max-width: 1920px;
        min-height: 2531px; /* Высота fon.png */
        background-image: url("fon.png");
        background-size: 100% auto;
        background-position: top center;
        background-repeat: no-repeat;
        overflow: hidden; /* ИЗМЕНЕНО: скрываем выходящее за границы */
        margin: 0 auto;
        flex: 1;
        background-color: rgba(88, 8, 167, 0.9);
      }

      /* Якорь - фиксированные размеры для ПК */
      .anchor {
        position: absolute;
        width: 1189px;
        height: 1189px;
        top: -99px;
        left: 788px;
        transform-origin: 594.5px 594.5px;
        transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        pointer-events: none;
        z-index: 1;
      }

      /* Общие стили для всех слоев якоря */
      .anchor-layer {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        pointer-events: none;
      }

      .anchor-layer img {
        width: 100%;
        height: 100%;
        display: block;
        pointer-events: none;
        object-fit: contain;
      }

      /* Слой с outside.png - вращается с якорем */
      .outside-layer {
        z-index: 1;
      }

      /* Слой с inside.png - вращается в обратную сторону */
      .inside-layer {
        z-index: 2;
        transform: rotate(0deg);
        transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* Аватар - статичный слой, позиционируется отдельно */
      .avatar-container {
        position: absolute;
        width: 1189px;
        height: 1189px;
        top: -99px;
        left: 788px;
        pointer-events: none;
        z-index: 3; /* Выше всех слоев якоря */
      }

      .avatar-container img {
        width: 100%;
        height: 100%;
        display: block;
        pointer-events: none;
        object-fit: contain;
      }

      /* Блоки информации - ОБНОВЛЕННЫЕ ЦВЕТА */
      .info-block {
        position: absolute;
        width: 658px;
        height: 461px;
        background-color: rgba(88, 8, 167, 0.15);
        border: 5px solid rgba(255, 255, 255, 0.8);
        border-radius: 30px;
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(7px);
        -webkit-backdrop-filter: blur(7px);
        z-index: 2;

        background-image: radial-gradient(
          circle at 50% 50%,
          rgba(255, 255, 255, 0.1) 1px,
          transparent 1px
        );
        background-size: 6.5px 6.5px;
      }

      .info-block::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 25px;
        background: radial-gradient(
            circle at 50% 0%,
            rgba(88, 8, 167, 0.25),
            transparent 50%
          ),
          radial-gradient(
            circle at 100% 50%,
            rgba(108, 38, 187, 0.2),
            transparent 50%
          ),
          radial-gradient(
            circle at 50% 100%,
            rgba(108, 38, 187, 0.2),
            transparent 50%
          ),
          radial-gradient(
            circle at 0% 50%,
            rgba(108, 38, 187, 0.2),
            transparent 50%
          );
        pointer-events: none;
        z-index: 1;
      }

      .info-block::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 30px;
        box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.3),
          inset 0 -1px 2px rgba(0, 0, 0, 0.1);
        pointer-events: none;
        z-index: 2;
      }

      .content {
        position: absolute;
        top: 20px;
        left: 20px;
        right: 20px;
        bottom: 80px;
        color: white;
        z-index: 3;
        padding: 20px;
        overflow: hidden;
        text-shadow: none;
      }

      .content h2 {
        color: white;
        text-shadow: none;
        font-size: 28px;
        margin-bottom: 20px;
      }

      .content p {
        color: white;
        text-shadow: none;
        font-size: 18px;
        line-height: 1.5;
      }

      .next-btn {
        position: absolute;
        top: 294px;
        left: 24px;
        width: 200px;
        height: 50px;
        background-color: rgba(88, 8, 167, 0.9);
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 10px;
        z-index: 3;
        font-size: 16px;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .next-btn:hover:not(:disabled) {
        background-color: rgba(108, 38, 187, 0.95);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(88, 8, 167, 0.3);
      }

      .prev-btn {
        position: absolute;
        top: 383px;
        left: 24px;
        width: 200px;
        height: 50px;
        background-color: rgba(88, 8, 167, 0.9);
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 10px;
        z-index: 3;
        font-size: 16px;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .prev-btn:hover:not(:disabled) {
        background-color: rgba(108, 38, 187, 0.95);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(88, 8, 167, 0.3);
      }

      .read-btn {
        position: absolute;
        top: 382px;
        left: 279px;
        width: 350px;
        height: 50px;
        background-color: rgba(88, 8, 167, 0.9);
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 10px;
        z-index: 3;
        font-size: 16px;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .read-btn:hover:not(:disabled) {
        background-color: rgba(108, 38, 187, 0.95);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(88, 8, 167, 0.3);
      }

      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none !important;
        box-shadow: none !important;
      }

      /* =================== СТИЛИ ДЛЯ OVERLAY-ИЗОБРАЖЕНИЯ =================== */
      .overlay-image-container {
        position: absolute;
        width: 100%;
        top: 812px;
        left: 0;
        z-index: 10;
        pointer-events: none;
      }

      .overlay-image {
        width: 100%;
        height: auto;
        display: block;
        max-width: 1920px;
        margin: 0 auto;
      }
      /* =================== КОНЕЦ OVERLAY-ИЗОБРАЖЕНИЯ =================== */

      /* =================== ИНТЕРАКТИВНАЯ ГАЛЕРЕЯ =================== */
      .interactive-gallery {
        position: absolute;
        width: 100%;
        top: 1360px;
        left: 0;
        z-index: 15;
        pointer-events: none;
      }

      .gallery-container {
        position: relative;
        width: 1023px;
        height: 613px;
        margin: 0 auto;
        pointer-events: auto;
      }

      .central-image {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 20;
      }

      .gias-photo {
        width: 100%;
        height: 100%;
        object-fit: contain;
        border-radius: 10px;
      }

      /* Текстовый блок поверх изображения */
      .text-overlay {
        position: absolute;
        width: 520px;
        height: 360px;
        top: 226px;
        right: 50px;
        left: auto;
        z-index: 25;
        background: transparent;
        color: white;
        padding: 25px;
        display: flex;
        flex-direction: column;
      }

      .text-content {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.5s ease, visibility 0.5s;
        display: flex;
        flex-direction: column;
      }

      .text-content.active {
        opacity: 1;
        visibility: visible;
      }

      /* ОБНОВЛЕННЫЙ СТИЛЬ ДЛЯ ТЕКСТА */
      .highlight-text {
        color: white;
        font-size: 22px;
        font-weight: 700;
        margin-bottom: 15px;
        text-align: center;
        line-height: 1.3;
        text-shadow: none;
      }

      .text-content p {
        color: white;
        font-size: 18px;
        line-height: 1.5;
        margin-bottom: 15px;
        flex-grow: 1;
        overflow-y: auto;
        text-shadow: none;
      }

      /* Кнопки внутри текстового блока */
      .text-buttons {
        display: flex;
        gap: 15px;
        margin-top: auto;
        padding-top: 20px;
        justify-content: center;
      }

      .learn-more-btn {
        padding: 12px 30px;
        background: linear-gradient(
          135deg,
          rgba(88, 8, 167, 0.9) 0%,
          rgba(108, 38, 187, 0.9) 100%
        );
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 180px;
        text-align: center;
      }

      .learn-more-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(88, 8, 167, 0.5);
      }

      .nav-buttons {
        display: none;
        gap: 10px;
      }

      .nav-btn {
        padding: 12px 20px;
        background: rgba(88, 8, 167, 0.3);
        color: white;
        border: 1px solid rgba(108, 38, 187, 0.5);
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 100px;
        backdrop-filter: blur(5px);
      }

      .nav-btn:hover {
        background: rgba(108, 38, 187, 0.4);
        transform: translateY(-2px);
      }

      /* Скрытые фотографии */
      .hidden-photo {
        position: absolute;
        width: 341px;
        height: 341px;
        opacity: 0;
        visibility: hidden;
        z-index: 10;
        transition: all 1s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        pointer-events: auto;
        left: 50%;
        top: 50%;
        margin-left: -170px;
        margin-top: -170px;
      }

      .hidden-photo img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 8px;
      }

      /* Позиции для разъезжания фотографий */
      .gallery-container.photos-active #photo1 {
        transform: translate(-600px, -300px) rotate(-15deg) scale(1);
        opacity: 1;
        visibility: visible;
        transition-delay: 0.1s;
      }

      .gallery-container.photos-active #photo2 {
        transform: translate(0, -450px) rotate(5deg) scale(1);
        opacity: 1;
        visibility: visible;
        transition-delay: 0.2s;
      }

      .gallery-container.photos-active #photo3 {
        transform: translate(600px, -300px) rotate(15deg) scale(1);
        opacity: 1;
        visibility: visible;
        transition-delay: 0.3s;
      }

      .gallery-container.photos-active #photo4 {
        transform: translate(-450px, 300px) rotate(-10deg) scale(1);
        opacity: 1;
        visibility: visible;
        transition-delay: 0.4s;
      }

      .gallery-container.photos-active #photo5 {
        transform: translate(450px, 300px) rotate(10deg) scale(1);
        opacity: 1;
        visibility: visible;
        transition-delay: 0.5s;
      }

      /* Анимация появления кнопок навигации */
      .nav-buttons.show {
        display: flex;
        animation: fadeInUp 0.5s ease;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Эффект при наведении на фотографии */
      .hidden-photo:hover {
        transform: scale(1.1) !important;
        z-index: 30 !important;
        transition: transform 0.3s ease !important;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      }

      /* =================== КОМБИНИРОВАННЫЕ НОВЫЕ СЕКЦИИ =================== */
      .content-sections {
        position: relative;
        width: 100%;
        background: linear-gradient(to bottom, rgba(88, 8, 167, 0.9), #321152);
        padding: 100px 0 0 0;
        z-index: 20;
        margin-top: 0;
      }

      .section-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .section {
        position: relative; /* Добавлено для позиционирования кнопки */
        max-width: 1200px;
        margin: 0 auto 100px;
        padding: 60px 40px 80px; /* Увеличено снизу для кнопки */
        background: rgba(88, 8, 167, 0.15);
        border-radius: 25px;
        backdrop-filter: blur(10px);
        border: 3px solid rgb(255, 255, 255);
        box-shadow: 0 20px 40px rgba(88, 8, 167, 0.9);
        overflow: hidden;
      }

      .section:last-child {
        margin-bottom: 0;
      }

      .section-title {
        text-align: center;
        font-size: 2.8rem;
        color: white;
        margin-bottom: 50px;
        position: relative;
        padding-bottom: 20px;
        text-shadow: none;
      }

      .section-title::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 100px;
        height: 4px;
        background: linear-gradient(90deg, #ffd700, #ffa500);
        border-radius: 2px;
      }

      .section-content {
        color: white;
        font-size: 18px;
        line-height: 1.8;
        text-shadow: none;
      }

      /* КНОПКА "ВЕРНУТЬСЯ В МЕНЮ" - НОВЫЙ СТИЛЬ */
      .back-to-menu-btn {
        display: block;
        margin: 40px auto 0;
        padding: 14px 40px;
        background: linear-gradient(
          135deg,
          rgba(88, 8, 167, 0.9) 0%,
          rgba(108, 38, 187, 0.9) 100%
        );
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 12px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
        max-width: 300px;
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
        box-shadow: 0 4px 15px rgba(88, 8, 167, 0.4);
      }

      .back-to-menu-btn:hover {
        transform: translateX(-50%) translateY(-3px);
        box-shadow: 0 8px 20px rgba(88, 8, 167, 0.6);
        background: linear-gradient(
          135deg,
          rgba(98, 18, 177, 0.9) 0%,
          rgba(118, 48, 197, 0.9) 100%
        );
        border-color: rgba(255, 255, 255, 0.5);
      }

      .back-to-menu-btn:active {
        transform: translateX(-50%) translateY(1px);
        box-shadow: 0 2px 10px rgba(88, 8, 167, 0.4);
      }

      /* 1. Сеттинг */
      .setting-section {
        background: linear-gradient(
          135deg,
          rgba(184, 122, 245, 0.178),
          rgba(101, 28, 161, 0.9)
        );
      }

      .setting-block {
        display: flex;
        align-items: center;
        gap: 60px;
        padding: 40px;
        background: rgba(88, 8, 167, 0.1);
        border-radius: 20px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 215, 0, 0.2);
      }

      .setting-text {
        flex: 1;
      }

      .setting-text h3 {
        font-size: 2.2rem;
        color: #ffd700;
        margin-bottom: 20px;
      }

      .setting-text p {
        color: white;
        font-size: 1.1rem;
        line-height: 1.8;
        margin-bottom: 15px;
        text-shadow: none;
      }

      .setting-bg {
        flex: 1;
        height: 400px;
        background: linear-gradient(
          45deg,
          rgba(88, 8, 167, 0.15),
          rgba(255, 215, 0, 0.1)
        );
        border-radius: 15px;
        position: relative;
        overflow: hidden;
      }

      .setting-bg::before {
        content: "";
        position: absolute;
        width: 200%;
        height: 200%;
        background: radial-gradient(
            circle at 30% 30%,
            rgba(88, 8, 167, 0.2) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 70% 70%,
            rgba(255, 215, 0, 0.2) 0%,
            transparent 50%
          );
        animation: rotate 20s linear infinite;
      }

      @keyframes rotate {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* 2. Персонаж */
      .character-section {
        background: linear-gradient(
          135deg,
          rgba(88, 8, 167, 0.15),
          rgba(108, 38, 187, 0.1)
        );
      }

      .character-block {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin-bottom: 40px;
      }

      .character-card {
        background: rgba(88, 8, 167, 0.1);
        border-radius: 15px;
        padding: 30px;
        border: 1px solid rgba(255, 215, 0, 0.2);
        transition: transform 0.3s ease, background 0.3s ease;
        border-top: 4px solid #ffd700;
      }

      .character-card:hover {
        transform: translateY(-10px);
        background: rgba(88, 8, 167, 0.15);
      }

      .character-card h3 {
        color: white;
        font-size: 20px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
        text-shadow: none;
      }

      .character-card h3::before {
        content: "★";
        color: #ffd700;
      }

      .character-card ul {
        list-style: none;
        padding: 0;
      }

      .character-card li {
        margin-bottom: 10px;
        padding-left: 20px;
        position: relative;
        color: white;
        text-shadow: none;
      }

      .character-card li::before {
        content: "→";
        position: absolute;
        left: 0;
        color: #ffd700;
      }

      .character-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 25px;
        margin-bottom: 40px;
      }

      .stat-item {
        background: rgba(88, 8, 167, 0.1);
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        transition: transform 0.3s ease;
        border-left: 4px solid #ffd700;
      }

      .stat-item:hover {
        transform: translateY(-5px);
      }

      .stat-value {
        font-size: 28px;
        color: #ffd700;
        font-weight: bold;
        margin: 10px 0;
      }

      /* 3. История */
      .timeline {
        position: relative;
        max-width: 800px;
        margin: 40px auto 0;
      }

      .timeline::before {
        content: "";
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        width: 3px;
        height: 100%;
        background: linear-gradient(to bottom, #ffd700, #ffa500);
      }

      .timeline-item {
        position: relative;
        margin-bottom: 40px;
        width: 45%;
      }

      .timeline-item:nth-child(odd) {
        left: 0;
      }

      .timeline-item:nth-child(even) {
        left: 55%;
      }

      .timeline-content {
        background: rgba(88, 8, 167, 0.1);
        padding: 20px;
        border-radius: 12px;
        border: 1px solid rgba(255, 215, 0, 0.2);
        transition: transform 0.3s ease;
      }

      .timeline-content:hover {
        transform: translateY(-5px);
        background: rgba(88, 8, 167, 0.15);
      }

      .timeline-year {
        color: #ffd700;
        font-weight: bold;
        margin-bottom: 10px;
        font-size: 1.2rem;
      }

      .timeline-content h4 {
        color: white;
        text-shadow: none;
      }

      .timeline-content p {
        color: white;
        text-shadow: none;
      }

      /* 4. Стратегии */
      .strategies-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
      }

      .strategy-card {
        background: rgba(88, 8, 167, 0.1);
        padding: 25px;
        border-radius: 15px;
        border-top: 4px solid #ffd700;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .strategy-card:hover {
        transform: translateY(-10px);
        background: rgba(88, 8, 167, 0.15);
        box-shadow: 0 10px 30px rgba(255, 215, 0, 0.2);
      }

      .strategy-title {
        color: white;
        font-size: 20px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
        text-shadow: none;
      }

      .strategy-card p {
        color: white;
        text-shadow: none;
      }

      /* 5. Галерея */
      .image-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      .gallery-item {
        position: relative;
        overflow: hidden;
        border-radius: 12px;
        height: 200px;
        cursor: pointer;
        transition: transform 0.3s ease;
        border: 1px solid rgba(255, 215, 0, 0.2);
      }

      .gallery-item:hover {
        transform: scale(1.05);
        border-color: rgba(255, 215, 0, 0.5);
      }

      .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
      }

      .gallery-item:hover img {
        transform: scale(1.1);
      }

      .gallery-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(88, 8, 167, 0.9);
        color: white;
        padding: 15px;
        transform: translateY(100%);
        transition: transform 0.3s ease;
        text-shadow: none;
        border-top: 2px solid #ffd700;
      }

      .gallery-item:hover .gallery-overlay {
        transform: translateY(0);
      }

      /* 6. Порядок просмотра */
      .watch-order {
        display: flex;
        flex-direction: column;
        gap: 25px;
        max-width: 800px;
        margin: 0 auto;
      }

      .order-item {
        display: flex;
        align-items: center;
        gap: 20px;
        padding: 25px;
        background: rgba(88, 8, 167, 0.1);
        border-radius: 15px;
        border-left: 5px solid #ffd700;
        transition: transform 0.3s ease;
      }

      .order-item:hover {
        transform: translateX(10px);
        background: rgba(88, 8, 167, 0.15);
      }

      .order-number {
        width: 40px;
        height: 40px;
        background: #ffd700;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 1.2rem;
        color: #1a1a2e;
      }

      .order-content h4 {
        color: white;
        font-size: 22px;
        margin-bottom: 5px;
        text-shadow: none;
      }

      .episodes {
        color: white;
        line-height: 1.6;
        text-shadow: none;
      }

      /* =================== ПОДВАЛ =================== */
      .footer {
        width: 100%;
        max-width: 1920px;
        margin: 0 auto;
        background-color: rgba(88, 8, 167, 0.98);
        padding: 40px 20px;
        border-top: 3px solid #ffd700;
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        flex-wrap: wrap;
        gap: 40px;
        justify-content: space-between;
      }

      .contact-form-container {
        flex: 1;
        min-width: 300px;
        background-color: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        border: 1px solid #ffd700;
      }

      .contact-info {
        flex: 1;
        min-width: 300px;
        padding: 20px;
      }

      .contact-info h3 {
        color: white;
        margin-bottom: 20px;
        font-size: 24px;
        text-shadow: none;
      }

      .contact-info p {
        color: white;
        margin-bottom: 15px;
        font-size: 16px;
        text-shadow: none;
      }

      .form-container {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .form-group label {
        font-size: 16px;
        color: #333;
        font-weight: 600;
      }

      .form-group input,
      .form-group textarea {
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        font-family: inherit;
        transition: all 0.3s ease;
        background-color: rgba(255, 255, 255, 0.9);
      }

      .form-group input:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #ffd700;
        box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.2);
      }

      .form-group textarea {
        min-height: 120px;
        resize: vertical;
      }

      .form-buttons {
        display: flex;
        gap: 15px;
        margin-top: 10px;
      }

      .submit-btn {
        flex: 2;
        padding: 14px 20px;
        background-color: rgba(88, 8, 167, 0.9);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .submit-btn:hover:not(:disabled) {
        background-color: rgba(108, 38, 187, 0.95);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .reset-btn {
        flex: 1;
        padding: 14px 20px;
        background-color: rgba(255, 215, 0, 0.9);
        color: #333;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .reset-btn:hover {
        background-color: rgba(255, 215, 0, 0.95);
        transform: translateY(-2px);
      }

      .submit-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none !important;
        box-shadow: none !important;
      }

      .message {
        padding: 12px;
        border-radius: 8px;
        margin-top: 15px;
        text-align: center;
        font-weight: 600;
        font-size: 14px;
        display: none;
      }

      .success {
        background-color: rgba(46, 204, 113, 0.15);
        color: #27ae60;
        border: 1px solid #27ae60;
      }

      .error {
        background-color: rgba(231, 76, 60, 0.15);
        color: #c0392b;
        border: 1px solid #c0392b;
      }

      .loading {
        background-color: rgba(52, 152, 219, 0.15);
        color: #2980b9;
        border: 1px solid #2980b9;
      }

      .copyright {
        text-align: center;
        margin-top: 40px;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 215, 0, 0.3);
        color: white;
        font-size: 14px;
        text-shadow: none;
      }

      /* =================== АДАПТИВНОСТЬ =================== */

      /* 1. НОУТБУКИ (1440px - 1920px) */
      @media (max-width: 1920px) and (min-width: 1441px) {
        .anchor {
          transform: scale(calc(100vw / 1920));
        }

        .avatar-container {
          transform: scale(calc(100vw / 1920));
        }

        .info-block {
          transform: scale(calc(100vw / 1920));
        }

        .page {
          min-height: calc(2531px * (100vw / 1920));
        }
      }

      /* 2. МАЛЕНЬКИЕ НОУТБУКИ (1024px - 1440px) */
      @media (max-width: 1440px) and (min-width: 1025px) {
        .page {
          background-size: cover;
          min-height: calc(2531px * (100vw / 1920));
        }

        .anchor {
          transform: scale(0.8);
          transform-origin: 594.5px 594.5px;
        }

        .avatar-container {
          transform: scale(0.8);
        }

        .info-block {
          transform: scale(0.8);
        }

        .next-btn,
        .prev-btn,
        .read-btn {
          font-size: 15px;
          width: 180px;
        }

        .read-btn {
          width: 320px;
          left: 250px;
        }

        .gallery-container {
          width: 800px;
          height: 480px;
        }

        .text-overlay {
          width: 400px;
          height: 300px;
          top: 180px;
          right: 40px;
        }

        .hidden-photo {
          width: 250px;
          height: 250px;
          margin-left: -125px;
          margin-top: -125px;
        }

        .highlight-text {
          font-size: 20px;
        }

        .text-content p {
          font-size: 16px;
        }

        /* Уменьшаем разлет для средних экранов */
        .gallery-container.photos-active #photo1 {
          transform: translate(-450px, -225px) rotate(-15deg);
        }

        .gallery-container.photos-active #photo2 {
          transform: translate(0, -337px) rotate(5deg);
        }

        .gallery-container.photos-active #photo3 {
          transform: translate(450px, -225px) rotate(15deg);
        }

        .gallery-container.photos-active #photo4 {
          transform: translate(-337px, 225px) rotate(-10deg);
        }

        .gallery-container.photos-active #photo5 {
          transform: translate(337px, 225px) rotate(10deg);
        }

        .section {
          padding: 50px 30px 70px; /* Увеличено снизу для кнопки */
        }

        .setting-block {
          flex-direction: column;
        }

        .setting-bg {
          width: 100%;
          height: 300px;
        }

        .strategies-grid {
          grid-template-columns: 1fr;
        }

        .character-block {
          grid-template-columns: repeat(2, 1fr);
        }

        .character-stats {
          grid-template-columns: repeat(2, 1fr);
        }

        h2 {
          font-size: 26px;
        }

        p {
          font-size: 17px;
        }
      }

      /* 3. ПЛАНШЕТЫ ГОРИЗОНТАЛЬНЫЕ (768px - 1024px) */
      @media (max-width: 1024px) and (min-width: 769px) {
        .page {
          background-size: cover;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: flex-start;
          padding-top: 100px;
          min-height: auto;
          height: auto;
        }

        .anchor {
          position: relative;
          width: 600px;
          height: 600px;
          top: 0;
          left: 0;
          margin: 0 auto 40px;
          transform-origin: center;
        }

        .avatar-container {
          position: absolute;
          width: 600px;
          height: 600px;
          top: 0;
          left: 50%;
          transform: translateX(-50%);
          z-index: 3;
        }

        .info-block {
          position: relative;
          width: 700px;
          height: 500px;
          margin: 20px auto;
          display: none;
        }

        .info-block.active {
          display: block;
        }

        .content {
          padding: 25px;
        }

        .next-btn,
        .prev-btn {
          width: 180px;
          height: 55px;
          font-size: 16px;
        }

        .read-btn {
          width: 340px;
          height: 55px;
          left: 230px;
          font-size: 16px;
        }

        .gallery-container {
          width: 90%;
          max-width: 700px;
          height: 420px;
        }

        .text-overlay {
          width: 350px;
          height: 280px;
          top: 140px;
          right: 30px;
          left: auto;
          padding: 20px;
        }

        .hidden-photo {
          width: 200px;
          height: 200px;
          margin-left: -100px;
          margin-top: -100px;
        }

        .highlight-text {
          font-size: 18px;
        }

        .text-content p {
          font-size: 15px;
        }

        .learn-more-btn {
          padding: 10px 20px;
          font-size: 14px;
        }

        .nav-btn {
          padding: 10px 15px;
          font-size: 13px;
        }

        /* Уменьшаем разлет для планшетов */
        .gallery-container.photos-active #photo1 {
          transform: translate(-300px, -150px) rotate(-10deg);
        }

        .gallery-container.photos-active #photo2 {
          transform: translate(0, -225px) rotate(5deg);
        }

        .gallery-container.photos-active #photo3 {
          transform: translate(300px, -150px) rotate(10deg);
        }

        .gallery-container.photos-active #photo4 {
          transform: translate(-225px, 150px) rotate(-8deg);
        }

        .gallery-container.photos-active #photo5 {
          transform: translate(225px, 150px) rotate(8deg);
        }

        .content-sections {
          margin-top: 1200px;
          padding: 80px 0 0 0;
        }

        .section {
          margin: 0 20px 60px;
          padding: 40px 20px 60px; /* Увеличено снизу для кнопки */
        }

        .section-title {
          font-size: 2.2rem;
        }

        .setting-block {
          flex-direction: column;
          padding: 30px;
        }

        .setting-bg {
          height: 250px;
        }

        .timeline::before {
          left: 30px;
        }

        .timeline-item {
          width: calc(100% - 50px);
          left: 50px !important;
        }

        .timeline-item:nth-child(even) {
          left: 50px !important;
        }

        .image-gallery {
          grid-template-columns: repeat(3, 1fr);
        }

        h2 {
          font-size: 26px;
          text-align: center;
        }

        p {
          font-size: 18px;
          text-align: center;
        }

        /* Кнопка "Вернуться в меню" для планшетов */
        .back-to-menu-btn {
          padding: 12px 30px;
          font-size: 16px;
          max-width: 250px;
        }

        .footer-content {
          flex-direction: column;
          gap: 30px;
        }

        .contact-form-container,
        .contact-info {
          min-width: 100%;
        }
      }

      /* 4. ПЛАНШЕТЫ ВЕРТИКАЛЬНЫЕ (481px - 768px) */
      @media (max-width: 768px) and (min-width: 481px) {
        .page {
          background-size: cover;
          display: flex;
          flex-direction: column;
          align-items: center;
          padding-top: 80px;
          min-height: auto;
          height: auto;
        }

        .anchor {
          position: relative;
          width: 500px;
          height: 500px;
          top: 0;
          left: 0;
          margin: 0 auto 30px;
          transform-origin: center;
        }

        .avatar-container {
          position: absolute;
          width: 500px;
          height: 500px;
          top: 0;
          left: 50%;
          transform: translateX(-50%);
          z-index: 3;
        }

        .info-block {
          position: relative;
          width: 90%;
          max-width: 600px;
          height: auto;
          min-height: 400px;
          margin: 20px auto;
          display: none;
        }

        .info-block.active {
          display: block;
        }

        .content {
          position: relative;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          padding: 30px;
          height: auto;
        }

        .next-btn,
        .prev-btn,
        .read-btn {
          position: relative;
          top: 0;
          left: 0;
          width: 100%;
          margin: 10px 0;
          height: 50px;
          font-size: 16px;
        }

        .read-btn {
          margin-left: 0;
        }

        .buttons-container {
          display: flex;
          flex-direction: column;
          gap: 10px;
          padding: 20px;
        }

        .gallery-container {
          width: 90%;
          height: 350px;
        }

        .text-overlay {
          width: 300px;
          height: 240px;
          top: 110px;
          right: 20px;
          left: auto;
          padding: 15px;
        }

        .hidden-photo {
          width: 150px;
          height: 150px;
          margin-left: -75px;
          margin-top: -75px;
        }

        .highlight-text {
          font-size: 16px;
          margin-bottom: 10px;
        }

        .text-content p {
          font-size: 14px;
        }

        .learn-more-btn {
          padding: 8px 16px;
          font-size: 13px;
          min-width: 140px;
        }

        .nav-btn {
          padding: 8px 12px;
          font-size: 12px;
        }

        /* Уменьшаем разлет для мобильных */
        .gallery-container.photos-active #photo1 {
          transform: translate(-180px, -90px) rotate(-8deg);
        }

        .gallery-container.photos-active #photo2 {
          transform: translate(0, -135px) rotate(5deg);
        }

        .gallery-container.photos-active #photo3 {
          transform: translate(180px, -90px) rotate(8deg);
        }

        .gallery-container.photos-active #photo4 {
          transform: translate(-135px, 90px) rotate(-6deg);
        }

        .gallery-container.photos-active #photo5 {
          transform: translate(135px, 90px) rotate(6deg);
        }

        .content-sections {
          margin-top: 900px;
          padding: 50px 0 0 0;
        }

        .section {
          margin: 0 15px 50px;
          padding: 30px 20px 50px; /* Увеличено снизу для кнопки */
        }

        .section-title {
          font-size: 1.8rem;
        }

        .setting-block {
          flex-direction: column;
          padding: 20px;
        }

        .setting-bg {
          height: 200px;
        }

        .timeline::before {
          left: 20px;
        }

        .timeline-item {
          width: calc(100% - 40px);
          left: 40px !important;
        }

        .image-gallery {
          grid-template-columns: repeat(2, 1fr);
        }

        .strategies-grid {
          grid-template-columns: 1fr;
        }

        .character-block,
        .character-stats {
          grid-template-columns: 1fr;
        }

        h2 {
          font-size: 24px;
          text-align: center;
          margin-bottom: 20px;
        }

        p {
          font-size: 17px;
          text-align: center;
          line-height: 1.6;
        }

        /* Кнопка "Вернуться в меню" для мобильных */
        .back-to-menu-btn {
          padding: 10px 25px;
          font-size: 16px;
          max-width: 220px;
        }

        .footer-content {
          flex-direction: column;
          gap: 30px;
        }

        .contact-form-container,
        .contact-info {
          min-width: 100%;
        }

        .form-buttons {
          flex-direction: column;
        }

        .submit-btn,
        .reset-btn {
          width: 100%;
        }
      }

      /* 5. ТЕЛЕФОНЫ (до 480px) */
      @media (max-width: 480px) {
        body {
          overflow-x: hidden;
        }

        .page {
          background-size: cover;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: flex-start;
          padding-top: 40px;
          min-height: auto;
          height: auto;
        }

        /* Якорь - центрируем и увеличиваем */
        .anchor {
          position: relative !important;
          width: 300px !important;
          height: 300px !important;
          top: 0 !important;
          left: 50% !important;
          transform: translateX(-50%) !important;
          margin: 0 auto 20px !important;
          transform-origin: center !important;
        }

        .avatar-container {
          position: absolute !important;
          width: 300px !important;
          height: 300px !important;
          top: 40px !important;
          left: 50% !important;
          transform: translateX(-50%) !important;
          z-index: 3 !important;
        }

        /* Блоки - увеличиваем в 2 раза и центрируем */
        .info-block {
          position: relative !important;
          width: 95% !important;
          max-width: 400px !important;
          height: auto !important;
          min-height: 350px !important;
          margin: 15px auto !important;
          display: none !important;
          left: 50% !important;
          transform: translateX(-50%) !important;
          top: 0 !important;
        }

        .info-block.active {
          display: block !important;
          animation: fadeIn 0.5s ease;
        }

        .content {
          position: relative !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          padding: 25px !important;
          height: auto !important;
        }

        .next-btn,
        .prev-btn,
        .read-btn {
          position: relative !important;
          top: 0 !important;
          left: 0 !important;
          width: 100% !important;
          margin: 8px 0 !important;
          height: 55px !important;
          font-size: 16px !important;
          font-weight: 600;
        }

        .read-btn {
          margin-left: 0 !important;
        }

        .buttons-container {
          display: flex;
          flex-direction: column;
          gap: 8px;
          padding: 15px;
          margin-top: 20px;
        }

        /* Галерея для телефона */
        .gallery-container {
          width: 95%;
          height: 250px;
        }

        .text-overlay {
          width: 250px;
          height: 200px;
          top: 70px;
          right: 10px;
          left: auto;
          padding: 12px;
        }

        .hidden-photo {
          width: 100px;
          height: 100px;
          margin-left: -50px;
          margin-top: -50px;
        }

        .highlight-text {
          font-size: 14px;
          margin-bottom: 8px;
        }

        .text-content p {
          font-size: 13px;
          line-height: 1.3;
        }

        .text-buttons {
          flex-direction: column;
          gap: 8px;
        }

        .learn-more-btn {
          padding: 8px 12px;
          font-size: 12px;
          min-width: 120px;
        }

        .nav-btn {
          padding: 8px 10px;
          font-size: 11px;
        }

        /* Уменьшаем разлет для маленьких экранов */
        .gallery-container.photos-active #photo1 {
          transform: translate(-120px, -60px) rotate(-6deg);
        }

        .gallery-container.photos-active #photo2 {
          transform: translate(0, -90px) rotate(5deg);
        }

        .gallery-container.photos-active #photo3 {
          transform: translate(120px, -60px) rotate(6deg);
        }

        .gallery-container.photos-active #photo4 {
          transform: translate(-90px, 60px) rotate(-4deg);
        }

        .gallery-container.photos-active #photo5 {
          transform: translate(90px, 60px) rotate(4deg);
        }

        .content-sections {
          margin-top: 600px;
          padding: 30px 0 0 0;
        }

        .section {
          margin: 0 10px 40px;
          padding: 25px 15px 45px; /* Увеличено снизу для кнопки */
        }

        .section-title {
          font-size: 1.6rem;
        }

        .setting-block {
          padding: 15px;
        }

        .setting-text h3 {
          font-size: 1.5rem;
        }

        .setting-bg {
          height: 150px;
        }

        .timeline::before {
          left: 10px;
        }

        .timeline-item {
          width: calc(100% - 30px);
          left: 30px !important;
        }

        .image-gallery {
          grid-template-columns: 1fr;
        }

        .character-block,
        .character-stats,
        .strategies-grid {
          grid-template-columns: 1fr;
        }

        h2 {
          font-size: 24px !important;
          text-align: center;
          margin-bottom: 20px;
        }

        p {
          font-size: 17px !important;
          text-align: center;
          line-height: 1.6;
        }

        /* Кнопка "Вернуться в меню" для телефонов */
        .back-to-menu-btn {
          padding: 10px 20px;
          font-size: 15px;
          max-width: 200px;
          bottom: 20px;
        }

        /* Подвал для телефона */
        .footer {
          padding: 30px 15px;
        }

        .footer-content {
          flex-direction: column;
          gap: 25px;
        }

        .contact-form-container,
        .contact-info {
          min-width: 100%;
          padding: 20px;
        }

        .contact-info h3 {
          font-size: 22px;
        }

        .contact-info p {
          font-size: 15px;
        }

        .form-container {
          gap: 15px;
        }

        .form-group label {
          font-size: 15px;
        }

        .form-group input,
        .form-group textarea {
          padding: 14px;
          font-size: 15px;
        }

        .form-buttons {
          flex-direction: column;
          gap: 10px;
        }

        .submit-btn,
        .reset-btn {
          width: 100%;
          padding: 16px;
          font-size: 16px;
        }

        .copyright {
          margin-top: 30px;
          font-size: 13px;
        }
      }

      /* 6. ОЧЕНЬ МАЛЕНЬКИЕ ТЕЛЕФОНЫ (до 360px) */
      @media (max-width: 360px) {
        .anchor {
          width: 250px !important;
          height: 250px !important;
        }

        .avatar-container {
          width: 250px !important;
          height: 250px !important;
        }

        .info-block {
          width: 98% !important;
          min-height: 400px !important;
        }

        .gallery-container {
          height: 220px;
        }

        .text-overlay {
          width: 220px;
          height: 180px;
          top: 60px;
          right: 10px;
          left: auto;
          padding: 10px;
        }

        .hidden-photo {
          width: 80px;
          height: 80px;
          margin-left: -40px;
          margin-top: -40px;
        }

        .highlight-text {
          font-size: 13px;
        }

        .text-content p {
          font-size: 12px;
        }

        .content-sections {
          margin-top: 500px;
        }

        .section-title {
          font-size: 1.4rem;
        }

        .setting-text h3 {
          font-size: 1.3rem;
        }

        .setting-bg {
          height: 120px;
        }

        h2 {
          font-size: 22px !important;
        }

        p {
          font-size: 16px !important;
        }

        .next-btn,
        .prev-btn,
        .read-btn {
          height: 50px !important;
          font-size: 15px !important;
        }

        /* Кнопка "Вернуться в меню" для очень маленьких телефонов */
        .back-to-menu-btn {
          padding: 8px 16px;
          font-size: 14px;
          max-width: 180px;
        }
      }

      /* =================== АДАПТИВНОСТЬ ДЛЯ OVERLAY-ИЗОБРАЖЕНИЯ =================== */
      @media (max-width: 1920px) {
        .overlay-image {
          width: 100%;
          max-width: 100%;
        }
      }

      @media (max-width: 768px) {
        .overlay-image-container {
          top: 400px;
          z-index: 5;
        }

        .overlay-image {
          opacity: 0.8;
        }
      }

      /* Индикаторы для мобильных */
      .mobile-indicators {
        display: none;
        justify-content: center;
        gap: 10px;
        margin: 20px 0;
      }

      @media (max-width: 1024px) {
        .mobile-indicators {
          display: flex;
        }
      }

      .indicator {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: rgba(88, 8, 167, 0.3);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .indicator.active {
        background-color: rgba(88, 8, 167, 0.8);
        transform: scale(1.2);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateX(-50%) translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateX(-50%) translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <div class="page" id="page">
      <!-- Якорь -->
      <div class="anchor" id="anchor">
        <div class="anchor-layer outside-layer">
          <img
            src="outside.png"
            alt="Внешняя часть якоря"
            width="1189"
            height="1189"
          />
        </div>
        <div class="anchor-layer inside-layer">
          <img
            src="inside.png"
            alt="Внутренняя часть якоря"
            width="1189"
            height="1189"
          />
        </div>
      </div>

      <!-- Аватар - отдельный статичный контейнер -->
      <div class="avatar-container">
        <img src="avatar.png" alt="Аватар" width="1189" height="1189" />
      </div>

      <!-- Overlay изображение -->
      <div class="overlay-image-container">
        <img src="fon2.png" alt="Наложение" class="overlay-image" />
      </div>

      <!-- ИНТЕРАКТИВНАЯ ГАЛЕРЕЯ -->
      <div class="interactive-gallery">
        <div class="gallery-container">
          <!-- Центральное изображение -->
          <div class="central-image">
            <img src="Giasphoto.png" alt="Главное фото" class="gias-photo" />

            <!-- Текстовый блок поверх изображения -->
            <div class="text-overlay">
              <!-- Текст 1 - только кнопка "Узнать больше" -->
              <div class="text-content active" id="text1">
                <div class="highlight-text">
                  <strong>Загадка, которая меняет судьбы</strong>
                </div>
                <p>
                  Что, если одна встреча могла бы свергнуть империи и переписать
                  историю? Гиасс — не просто сверхспособность, а древняя сила,
                  построенная на договоре. Сила, которая в руках одних
                  становится благословением, а в руках других — проклятием. Она
                  даровала могущество, но потребовала самую высокую цену.
                </p>

                <div class="text-buttons">
                  <button class="learn-more-btn" id="learnMoreBtn">
                    Узнать больше
                  </button>
                  <!-- Добавляем навигационные кнопки в первый текст -->
                  <div class="nav-buttons">
                    <button class="nav-btn prev-text-btn">Назад</button>
                    <button class="nav-btn next-text-btn">Вперед</button>
                  </div>
                </div>
              </div>

              <!-- Текст 2 -->
              <div class="text-content" id="text2">
                <div class="highlight-text">
                  <strong>Дар Богов или Проклятие Времён?</strong>
                </div>
                <p>
                  Гиасс — это проявление силы коллективного бессознательного
                  человечества, известной как C's World. Его корни теряются в
                  глубине тысячелетий. Изначально он был доступен лишь избранным
                  — жрецам и оракулам, которые слышали «голос богов». Но со
                  временем сила эволюционировала, став предметом контрактов,
                  которые заключали бессмертные носители кода, такие как C.C.
                </p>

                <div class="text-buttons">
                  <button class="learn-more-btn">Узнать больше</button>
                  <div class="nav-buttons">
                    <button class="nav-btn prev-text-btn">Назад</button>
                    <button class="nav-btn next-text-btn">Вперед</button>
                  </div>
                </div>
              </div>

              <!-- Текст 3 -->
              <div class="text-content" id="text3">
                <div class="highlight-text">
                  <strong>Контракт, Код и Цена</strong>
                </div>
                <p>
                  Гиасс — это не врождённый дар. Он передаётся через контракт с
                  бессмертным носителем Кода (например, C.C.). В обмен на силу
                  получатель даёт клятву исполнить одно истинное желание
                  дарителя. Сила проявляется у каждого уникально (Гиасс
                  Абсолютного Подчинения у Лелуша, Гиасс Абсолютного Послушания
                  у императора Чарльза), но всегда активируется при зрительном
                  контакте и работает на человека только один раз.
                </p>

                <div class="text-buttons">
                  <button class="learn-more-btn">Узнать больше</button>
                  <div class="nav-buttons">
                    <button class="nav-btn prev-text-btn">Назад</button>
                    <button class="nav-btn next-text-btn">Вперед</button>
                  </div>
                </div>
              </div>

              <!-- Текст 4 -->
              <div class="text-content" id="text4">
                <div class="highlight-text">
                  <strong>Символ и Ограничения</strong>
                </div>
                <p>
                  При активации Гиасса в глазу пользователя появляется
                  уникальная метка — летящая птица-символ фиолетового цвета.
                  Сила безгранична в пределах своего условия, но имеет ключевые
                  ограничения: не работает на других носителей Кода, требует
                  прямого взгляда и не может отменить уже отданный приказ.
                  Главная опасность — сила может выйти из-под контроля, если
                  эмоции пользователя слишком сильны.
                </p>

                <div class="text-buttons">
                  <button class="learn-more-btn">Узнать больше</button>
                  <div class="nav-buttons">
                    <button class="nav-btn prev-text-btn">Назад</button>
                    <button class="nav-btn next-text-btn">Вперед</button>
                  </div>
                </div>
              </div>

              <!-- Текст 5 -->
              <div class="text-content" id="text5">
                <div class="highlight-text">
                  <strong>Договор с Дьяволом</strong>
                </div>
                <p>
                  Для Лелуша Гиасс стал орудием мести и изменений. Его контракт
                  с C.C. в первом эпизоде — отправная точка всей истории. Он
                  получил Гиасс Абсолютного Подчинения, позволяющий отдавать
                  любые приказы, которые человек обязан выполнить, даже против
                  своей воли. Эта сила превратила принца-изгнанника в
                  харизматичного лидера Зеро и в итоге привела его к трону
                  императора, а затем — к жертве по плану «Реквием Нуля».
                </p>

                <div class="text-buttons">
                  <button class="learn-more-btn">Узнать больше</button>
                  <div class="nav-buttons">
                    <button class="nav-btn prev-text-btn">Назад</button>
                    <button class="nav-btn next-text-btn">Вперед</button>
                  </div>
                </div>
              </div>

              <!-- Текст 6 -->
              <div class="text-content" id="text6">
                <div class="highlight-text">
                  <strong>Сила, которая формирует миры</strong>
                </div>
                <p>
                  Гиасс — больше чем просто магическая способность. Это символ
                  выбора, ответственности и цены власти. Каждый носитель Гиасса
                  сталкивается с вечными вопросами: как использовать эту силу?
                  Какова настоящая цена могущества? И что остаётся после того,
                  как желание исполнено, а контракт завершён?
                </p>

                <div class="text-buttons">
                  <button class="learn-more-btn">Узнать больше</button>
                  <div class="nav-buttons">
                    <button class="nav-btn prev-text-btn">Назад</button>
                    <button class="nav-btn next-text-btn">Вперед</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Скрытые изображения (фотографии) -->
          <div class="hidden-photo" id="photo1">
            <img src="photo.png" alt="Фото 1" />
          </div>
          <div class="hidden-photo" id="photo2">
            <img src="photo.png" alt="Фото 2" />
          </div>
          <div class="hidden-photo" id="photo3">
            <img src="photo.png" alt="Фото 3" />
          </div>
          <div class="hidden-photo" id="photo4">
            <img src="photo.png" alt="Фото 4" />
          </div>
          <div class="hidden-photo" id="photo5">
            <img src="photo.png" alt="Фото 5" />
          </div>
        </div>
      </div>

      <!-- Индикаторы для мобильных/планшетов -->
      <div class="mobile-indicators" id="indicators">
        <div class="indicator active" data-index="0"></div>
        <div class="indicator" data-index="1"></div>
        <div class="indicator" data-index="2"></div>
        <div class="indicator" data-index="3"></div>
        <div class="indicator" data-index="4"></div>
        <div class="indicator" data-index="5"></div>
      </div>

      <!-- 6 блоков информации -->
      <div
        class="info-block active"
        id="block1"
        style="top: 265px; left: 233px"
      >
        <div class="content">
          <h2>Введение в сеттинг</h2>
          <p>
            Альтернативная история, где Британия стала сверхдержавой. Империя
            Британии подчинила треть мира с помощью гигантских
            роботов-Найтмеров.
          </p>
        </div>
        <div class="buttons-container">
          <button class="next-btn">Далее</button>
          <button class="prev-btn">Назад</button>
          <button class="read-btn" data-target="section1">
            Перейти к чтению
          </button>
        </div>
      </div>

      <div class="info-block" id="block2">
        <div class="content">
          <h2>О персонаже</h2>
          <p>
            Лелуш Ламперуж — принц-изгнанник, который становится лидером
            сопротивления под маской Зеро.
          </p>
        </div>
        <div class="buttons-container">
          <button class="next-btn">Далее</button>
          <button class="prev-btn">Назад</button>
          <button class="read-btn" data-target="section2">
            Перейти к чтению
          </button>
        </div>
      </div>

      <div class="info-block" id="block3">
        <div class="content">
          <h2>История</h2>
          <p>
            От контракта с C.C. до плана "Реквием Нуля". Ключевые события
            хронологии.
          </p>
        </div>
        <div class="buttons-container">
          <button class="next-btn">Далее</button>
          <button class="prev-btn">Назад</button>
          <button class="read-btn" data-target="section3">
            Перейти к чтению
          </button>
        </div>
      </div>

      <div class="info-block" id="block4">
        <div class="content">
          <h2>Стратегии</h2>
          <p>
            Тактические приемы Лелуша: манипуляции, дезинформация, шахматные
            стратегии.
          </p>
        </div>
        <div class="buttons-container">
          <button class="next-btn">Далее</button>
          <button class="prev-btn">Назад</button>
          <button class="read-btn" data-target="section4">
            Перейти к чтению
          </button>
        </div>
      </div>

      <div class="info-block" id="block5">
        <div class="content">
          <h2>Галерея</h2>
          <p>Коллекция изображений, концепт-артов и ключевых моментов аниме.</p>
        </div>
        <div class="buttons-container">
          <button class="next-btn">Далее</button>
          <button class="prev-btn">Назад</button>
          <button class="read-btn" data-target="section5">
            Перейти к чтению
          </button>
        </div>
      </div>

      <div class="info-block" id="block6">
        <div class="content">
          <h2>Порядок просмотра</h2>
          <p>Рекомендации по хронологии серий и дополнительных материалов.</p>
        </div>
        <div class="buttons-container">
          <button class="next-btn">Далее</button>
          <button class="prev-btn">Назад</button>
          <button class="read-btn" data-target="section6">
            Перейти к чтению
          </button>
        </div>
      </div>
    </div>

    <!-- КОМБИНИРОВАННЫЕ НОВЫЕ СЕКЦИИ -->
    <div class="content-sections" id="contentSections">
      <div class="section-container">
        <!-- Секция 1: Введение в сеттинг -->
        <section class="section setting-section" id="section1">
          <h2 class="section-title">Введение в сеттинг</h2>
          <div class="section-content">
            <div class="setting-block">
              <div class="setting-text">
                <h3>Мир Code Geass: Альтернативная реальность</h3>
                <p>
                  Действие Code Geass разворачивается в альтернативной
                  реальности, где Священная Британская Империя стала
                  доминирующей сверхдержавой, завоевав треть мира с помощью
                  революционного оружия — гигантских человекоподобных роботов
                  Найтмеров.
                </p>
                <p>
                  В 2010 году Святая Британская Империя завоевала Японию,
                  переименовав её в "Зону 11". Японцы стали "одиннадцатыми" —
                  людьми второго сорта в собственной стране.
                </p>
                <p>
                  В этом мире технология развивалась иначе: основной упор был
                  сделан на разработку Сакурайта и создание гигантских боевых
                  машин, изменивших лицо войны.
                </p>
              </div>
              <div class="setting-bg"></div>
            </div>
            <!-- КНОПКА "ВЕРНУТЬСЯ В МЕНЮ" ДОБАВЛЕНА -->
            <button class="back-to-menu-btn">Вернуться в меню</button>
          </div>
        </section>

        <!-- Секция 2: О персонаже -->
        <section class="section character-section" id="section2">
          <h2 class="section-title">Лелуш ви Британия</h2>
          <div class="section-content">
            <p>
              Принц-изгнанник, лидер сопротивления Зеро, гениальный стратег и
              носитель Гиасса — Лелуш одна из самых сложных и противоречивых
              фигур в истории аниме.
            </p>

            <div class="character-stats">
              <div class="stat-item">
                <h3>Возраст</h3>
                <div class="stat-value">17</div>
                <p>Начало сериала</p>
              </div>
              <div class="stat-item">
                <h3>Интеллект</h3>
                <div class="stat-value">★ ★ ★ ★ ★</div>
                <p>Гений стратегии</p>
              </div>
              <div class="stat-item">
                <h3>Харизма</h3>
                <div class="stat-value">★ ★ ★ ★ ★</div>
                <p>Лидер сопротивления</p>
              </div>
              <div class="stat-item">
                <h3>Эмоции</h3>
                <div class="stat-value">★ ★ ★ ☆ ☆</div>
                <p>Скрывает чувства</p>
              </div>
            </div>

            <div class="character-block">
              <div class="character-card">
                <h3>Характеристики</h3>
                <ul>
                  <li>
                    <strong>Возраст:</strong> 17-18 лет (в начале истории)
                  </li>
                  <li>
                    <strong>Статус:</strong> Принц Британии №17 / Студент /
                    Лидер сопротивления
                  </li>
                  <li>
                    <strong>Способности:</strong> Гений стратегии, владелец
                    Гиасса
                  </li>
                  <li>
                    <strong>Семья:</strong> Чарльз ди Британния (отец), Наналли
                    (сестра)
                  </li>
                  <li><strong>Цель:</strong> Создать мир для сестры Наналли</li>
                </ul>
              </div>
              <div class="character-card">
                <h3>Личность</h3>
                <ul>
                  <li>Харизматичный и манипулятивный лидер</li>
                  <li>Хладнокровный стратег, готовый на любые жертвы</li>
                  <li>Искренне заботится о сестре и друзьях</li>
                  <li>Ненавидит несправедливость и систему Британии</li>
                  <li>Страдает от одиночества и бремени своей миссии</li>
                </ul>
              </div>
              <div class="character-card">
                <h3>Мотивация</h3>
                <ul>
                  <li>Месть за мать и инвалидность сестры</li>
                  <li>Создание мирного мира для Наналли</li>
                  <li>Уничтожение коррумпированной системы Британии</li>
                  <li>Доказательство, что слабый может победить сильного</li>
                  <li>Искупление грехов через самопожертвование</li>
                </ul>
              </div>
            </div>
            <!-- КНОПКА "ВЕРНУТЬСЯ В МЕНЮ" ДОБАВЛЕНА -->
            <button class="back-to-menu-btn">Вернуться в меню</button>
          </div>
        </section>

        <!-- Секция 3: История -->
        <section class="section" id="section3">
          <h2 class="section-title">Хронология событий</h2>
          <div class="section-content">
            <p>
              Путь Лелуша от изгнанного принца до императора мира и его
              окончательная жертва.
            </p>

            <div class="timeline">
              <div class="timeline-item">
                <div class="timeline-content">
                  <div class="timeline-year">2010</div>
                  <h4>Изгнание в Японию</h4>
                  <p>
                    Лелуш и Наналли отправлены в Японию как политические
                    заложники после убийства матери.
                  </p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-content">
                  <div class="timeline-year">2017</div>
                  <h4>Контракт с C.C.</h4>
                  <p>
                    Встреча с бессмертной ведьмой, получение Гиасса Абсолютного
                    Подчинения.
                  </p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-content">
                  <div class="timeline-year">2018</div>
                  <h4>Рождение Зеро</h4>
                  <p>
                    Первое появление в маске, создание Ордена Чёрных Рыцарей,
                    первые победы над Британией.
                  </p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-content">
                  <div class="timeline-year">2019</div>
                  <h4>Восхождение к власти</h4>
                  <p>
                    Захват Токио, битва за Нариту, раскрытие личности Зеро,
                    смерть Юфемии.
                  </p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-content">
                  <div class="timeline-year">2020</div>
                  <h4>Становление императором</h4>
                  <p>
                    Захват трона Британии, начало глобальных реформ, конфликт с
                    Шнайзелем.
                  </p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-content">
                  <div class="timeline-year">2021</div>
                  <h4>План "Реквием Нуля"</h4>
                  <p>
                    Добровольное принятие роли всемирного злодея и жертва ради
                    мира.
                  </p>
                </div>
              </div>
            </div>
            <!-- КНОПКА "ВЕРНУТЬСЯ В МЕНЮ" ДОБАВЛЕНА -->
            <button class="back-to-menu-btn">Вернуться в меню</button>
          </div>
        </section>

        <!-- Секция 4: Стратегии -->
        <section class="section" id="section4">
          <h2 class="section-title">Тактические приемы</h2>
          <div class="section-content">
            <p>
              Лелуш использует комбинацию интеллекта, манипуляции и предвидения,
              чтобы побеждать превосходящего противника.
            </p>

            <div class="strategies-grid">
              <div class="strategy-card">
                <div class="strategy-title">♟️ Шахматный подход</div>
                <p>
                  Рассматривает каждое сражение как шахматную партию. Заранее
                  предсказывает ходы противника на 10-20 шагов вперёд. Всегда
                  имеет запасные планы.
                </p>
              </div>
              <div class="strategy-card">
                <div class="strategy-title">🎭 Манипуляция и дезинформация</div>
                <p>
                  Создаёт ложные образы, скрывает истинные цели, использует
                  противника против самого себя. Играет на слабостях и эмоциях
                  врагов.
                </p>
              </div>
              <div class="strategy-card">
                <div class="strategy-title">✨ Использование Гиасса</div>
                <p>
                  Точно формулирует приказы, оставляя минимум лазеек. Сохраняет
                  приказы для ключевых моментов. Понимает ограничения силы.
                </p>
              </div>
              <div class="strategy-card">
                <div class="strategy-title">⚡ Блицкриг и неожиданность</div>
                <p>
                  Атакует там, где противник не ждёт. Использует скорость и
                  внезапность. Меняет тактику в середине боя.
                </p>
              </div>
              <div class="strategy-card">
                <div class="strategy-title">🎯 Точечные удары</div>
                <p>
                  Ищет слабые точки в обороне противника. Устраняет ключевых
                  командиров. Дезорганизует управление вражеских войск.
                </p>
              </div>
              <div class="strategy-card">
                <div class="strategy-title">🛡️ Использование репутации</div>
                <p>
                  Создаёт миф о непобедимости Зеро. Использует страх и надежду
                  как оружие. Контролирует информационное поле.
                </p>
              </div>
            </div>
            <!-- КНОПКА "ВЕРНУТЬСЯ В МЕНЮ" ДОБАВЛЕНА -->
            <button class="back-to-menu-btn">Вернуться в меню</button>
          </div>
        </section>

        <!-- Секция 5: Галерея -->
        <section class="section" id="section5">
          <h2 class="section-title">Галерея</h2>
          <div class="section-content">
            <p>Ключевые моменты, арты и концепции из вселенной Code Geass.</p>

            <div class="image-gallery">
              <div class="gallery-item">
                <img
                  src="https://via.placeholder.com/300x200/5808A7/fff?text=Лелуш+как+Зеро"
                  alt="Лелуш как Зеро"
                />
                <div class="gallery-overlay">
                  <strong>Зеро</strong><br />
                  Легендарная маска сопротивления
                </div>
              </div>
              <div class="gallery-item">
                <img
                  src="https://via.placeholder.com/300x200/6C26BB/fff?text=Ланцелот"
                  alt="Ланцелот"
                />
                <div class="gallery-overlay">
                  <strong>Ланцелот</strong><br />
                  Найтмер Сюзанны
                </div>
              </div>
              <div class="gallery-item">
                <img
                  src="https://via.placeholder.com/300x200/1a1a2e/fff?text=C.C."
                  alt="C.C."
                />
                <div class="gallery-overlay">
                  <strong>C.C.</strong><br />
                  Бессмертная ведьма
                </div>
              </div>
              <div class="gallery-item">
                <img
                  src="https://via.placeholder.com/300x200/0a0a1a/fff?text=Наналли"
                  alt="Наналли"
                />
                <div class="gallery-overlay">
                  <strong>Наналли</strong><br />
                  Младшая сестра Лелуша
                </div>
              </div>
              <div class="gallery-item">
                <img
                  src="https://via.placeholder.com/300x200/5808A7/fff?text=Гиасс+активация"
                  alt="Активация Гиасса"
                />
                <div class="gallery-overlay">
                  <strong>Гиасс</strong><br />
                  Символ летящей птицы
                </div>
              </div>
              <div class="gallery-item">
                <img
                  src="https://via.placeholder.com/300x200/6C26BB/fff?text=Чёрные+Рыцари"
                  alt="Чёрные Рыцари"
                />
                <div class="gallery-overlay">
                  <strong>Чёрные Рыцари</strong><br />
                  Армия сопротивления
                </div>
              </div>
            </div>
            <!-- КНОПКА "ВЕРНУТЬСЯ В МЕНЮ" ДОБАВЛЕНА -->
            <button class="back-to-menu-btn">Вернуться в меню</button>
          </div>
        </section>

        <!-- Секция 6: Порядок просмотра -->
        <section class="section" id="section6">
          <h2 class="section-title">Порядок просмотра</h2>
          <div class="section-content">
            <p>
              Рекомендуемая хронология для полного погружения во вселенную Code
              Geass.
            </p>

            <div class="watch-order">
              <div class="order-item">
                <div class="order-number">1</div>
                <div class="order-content">
                  <h4>Code Geass: Lelouch of the Rebellion</h4>
                  <div class="episodes">
                    <strong>Сезон 1 (25 эпизодов):</strong> От получения Гиасса
                    до образования Чёрных Рыцарей.
                  </div>
                </div>
              </div>

              <div class="order-item">
                <div class="order-number">2</div>
                <div class="order-content">
                  <h4>Code Geass: Lelouch of the Rebellion R2</h4>
                  <div class="episodes">
                    <strong>Сезон 2 (25 эпизодов):</strong> Возвращение памяти,
                    путь к трону, финальный план.
                  </div>
                </div>
              </div>

              <div class="order-item">
                <div class="order-number">3</div>
                <div class="order-content">
                  <h4>OVA и побочные истории</h4>
                  <div class="episodes">
                    <strong>Рекомендуется после основного сериала:</strong> Code
                    Geass: Akito the Exiled (5 эпизодов), Picture Dramas.
                  </div>
                </div>
              </div>

              <div class="order-item">
                <div class="order-number">4</div>
                <div class="order-content">
                  <h4>Фильмы: Resurrection</h4>
                  <div class="episodes">
                    <strong>Альтернативная временная линия:</strong> Трилогия
                    пересказов и заключительный фильм "Fukkatsu no Lelouch".
                  </div>
                </div>
              </div>
            </div>
            <!-- КНОПКА "ВЕРНУТЬСЯ В МЕНЮ" ДОБАВЛЕНА -->
            <button class="back-to-menu-btn">Вернуться в меню</button>
          </div>
        </section>
      </div>
    </div>

    <!-- Подвал сайта с формой обратной связи -->
    <footer class="footer">
      <div class="footer-content">
        <div class="contact-info">
          <h3>Свяжитесь со мной</h3>
          <p>
            Если у вас есть вопросы или предложения, напишите мне через форму
            обратной связи.
          </p>
          <p>Я отвечу в течение 24 часов в рабочие дни.</p>
          <p>Вы также можете связаться со мной по email: example@mail.com</p>
        </div>

        <div class="contact-form-container">
          <h2>Форма обратной связи</h2>
          <p>Напишите мне, и я отвечу в ближайшее время</p>

          <form
            id="contactForm"
            class="form-container"
            action="https://formspree.io/f/xovgnegg"
            method="POST"
          >
            <div class="form-group">
              <label for="name">Ваше имя:</label>
              <input
                type="text"
                id="name"
                name="name"
                required
                placeholder="Введите ваше имя"
              />
            </div>

            <div class="form-group">
              <label for="email">Ваш email:</label>
              <input
                type="email"
                id="email"
                name="email"
                required
                placeholder="example@mail.com"
              />
            </div>

            <div class="form-group">
              <label for="message">Сообщение:</label>
              <textarea
                id="message"
                name="message"
                required
                placeholder="Напишите ваше сообщение здесь..."
              ></textarea>
            </div>

            <!-- Дополнительные поля для Formspree -->
            <input
              type="hidden"
              name="_subject"
              value="Новое сообщение с сайта-визитки разработчика"
            />
            <input type="text" name="_gotcha" style="display: none" />

            <div class="form-buttons">
              <button type="button" class="reset-btn" id="resetBtn">
                Очистить
              </button>
              <button type="submit" class="submit-btn" id="submitBtn">
                Отправить сообщение
              </button>
            </div>

            <div class="message" id="formMessage"></div>
          </form>
        </div>
      </div>

      <div class="copyright">
        © 2024 Сайт о Лелуше и Code Geass. Все права на персонажей принадлежат
        Sunrise, Bandai и авторам.
      </div>
    </footer>

    <script>
      let currentBlock = 0;
      let isAnimating = false;
      const anchor = document.getElementById("anchor");
      const blocks = document.querySelectorAll(".info-block");
      const indicators = document.querySelectorAll(".indicator");

      // Центр якоря для ПК (исходные координаты)
      const centerX = 788 + 594.5;
      const centerY = -99 + 594.5;

      // Позиция блока 1 для ПК
      const block1X = 233 + 329;
      const block1Y = 265 + 230.5;

      // Рассчитываем угол и радиус для блока 1
      const dx = block1X - centerX;
      const dy = block1Y - centerY;
      const radius = Math.sqrt(dx * dx + dy * dy);
      const startAngle = (Math.atan2(dx, -dy) * 180) / Math.PI;

      // Определение типа устройства
      function getDeviceType() {
        const width = window.innerWidth;
        if (width >= 1025) return "desktop";
        if (width >= 769) return "tablet";
        return "mobile";
      }

      // Флаг анимации для предотвращения множественных нажатий
      function setButtonsDisabled(disabled) {
        document
          .querySelectorAll(".next-btn, .prev-btn, .read-btn")
          .forEach((btn) => {
            btn.disabled = disabled;
          });
      }

      // Обновление индикаторов
      function updateIndicators() {
        indicators.forEach((indicator, index) => {
          indicator.classList.toggle("active", index === currentBlock);
        });
      }

      // Инициализация позиций блоков в зависимости от устройства
      function arrangeBlocks() {
        const device = getDeviceType();

        if (device === "desktop") {
          // ДЕСКТОП: круговое расположение
          for (let i = 0; i < 6; i++) {
            const block = blocks[i];
            if (i === 0) {
              block.style.left = "233px";
              block.style.top = "265px";
              block.style.display = "block";
            } else {
              const blockAngle = startAngle + i * 60;
              const rad = (blockAngle * Math.PI) / 180;
              const x = centerX + radius * Math.sin(rad) - 329;
              const y = centerY - radius * Math.cos(rad) - 230.5;
              block.style.left = x + "px";
              block.style.top = y + "px";
              block.style.display = "block";
            }
          }
        } else {
          // ПЛАНШЕТ/ТЕЛЕФОН: показываем только текущий блок
          blocks.forEach((block, index) => {
            if (index === currentBlock) {
              block.classList.add("active");
              block.style.display = "block";
            } else {
              block.classList.remove("active");
              block.style.display = "none";
            }
          });
          updateIndicators();
        }
      }

      // Функция для плавного вращения/переключения
      function rotateSmoothly(direction) {
        if (isAnimating) return;
        isAnimating = true;
        setButtonsDisabled(true);

        const device = getDeviceType();
        let targetAngle;

        // Вычисляем целевой угол
        if (direction === "next") {
          currentBlock = (currentBlock + 1) % 6;
          targetAngle = -currentBlock * 60;
        } else {
          currentBlock = (currentBlock - 1 + 6) % 6;
          targetAngle = -currentBlock * 60;
        }

        if (device === "desktop") {
          // ДЕСКТОП: вращаем якорь и inside-layer в обратную сторону
          anchor.style.transform = `rotate(${targetAngle}deg)`;

          // Вращаем inside-layer в обратную сторону с перевесом
          const insideLayer = document.querySelector(".inside-layer");
          if (insideLayer) {
            // Вращаем в 1.5 раза быстрее в обратную сторону
            insideLayer.style.transform = `rotate(${-targetAngle * 1.5}deg)`;
          }

          for (let i = 0; i < 6; i++) {
            const block = blocks[i];
            const blockIndex = (i - currentBlock + 6) % 6;
            const blockAngle = startAngle + blockIndex * 60;
            const rad = (blockAngle * Math.PI) / 180;
            const x = centerX + radius * Math.sin(rad) - 329;
            const y = centerY - radius * Math.cos(rad) - 230.5;
            block.style.left = x + "px";
            block.style.top = y + "px";
          }

          setTimeout(() => {
            isAnimating = false;
            setButtonsDisabled(false);
          }, 800);
        } else {
          // ПЛАНШЕТ/ТЕЛЕФОН: плавное переключение блоков
          const prevBlock =
            blocks[(currentBlock - (direction === "next" ? 1 : -1) + 6) % 6];
          const nextBlock = blocks[currentBlock];

          // Скрываем предыдущий блок
          prevBlock.classList.remove("active");
          setTimeout(() => {
            prevBlock.style.display = "none";

            // Показываем следующий блок
            nextBlock.style.display = "block";
            setTimeout(() => {
              nextBlock.classList.add("active");

              // Вращаем якорь для планшетов/телефонов
              if (device === "tablet") {
                anchor.style.transform = `rotate(${targetAngle}deg)`;

                // Вращаем inside-layer в обратную сторону с перевесом
                const insideLayer = document.querySelector(".inside-layer");
                if (insideLayer) {
                  insideLayer.style.transform = `rotate(${
                    -targetAngle * 1.5
                  }deg)`;
                }
              }

              updateIndicators();

              setTimeout(() => {
                isAnimating = false;
                setButtonsDisabled(false);
              }, 300);
            }, 50);
          }, 300);
        }
      }

      // Вращение вперед
      function next() {
        rotateSmoothly("next");
      }

      // Вращение назад
      function prev() {
        rotateSmoothly("prev");
      }

      // Переход к конкретному блоку (для индикаторов)
      function goToBlock(index) {
        if (isAnimating || index === currentBlock) return;

        const device = getDeviceType();
        const direction = index > currentBlock ? "next" : "prev";
        const steps = Math.abs(index - currentBlock);

        function moveStep(step) {
          if (step >= steps) return;
          rotateSmoothly(direction);
          setTimeout(
            () => moveStep(step + 1),
            device === "desktop" ? 800 : 600
          );
        }

        moveStep(0);
      }

      // Назначаем обработчики для всех кнопок навигации
      document.querySelectorAll(".next-btn").forEach((btn) => {
        btn.addEventListener("click", next);
      });

      document.querySelectorAll(".prev-btn").forEach((btn) => {
        btn.addEventListener("click", prev);
      });

      // Изменяем обработчик для кнопок "Перейти к чтению"
      document.querySelectorAll(".read-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          const targetId = this.getAttribute("data-target");
          if (targetId) {
            const targetSection = document.getElementById(targetId);
            if (targetSection) {
              targetSection.scrollIntoView({
                behavior: "smooth",
                block: "start",
              });
            }
          }
        });
      });

      // Обработчики для индикаторов
      indicators.forEach((indicator, index) => {
        indicator.addEventListener("click", () => goToBlock(index));
      });

      // Обработчики для кнопок "Вернуться в меню"
      document.querySelectorAll(".back-to-menu-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          // Прокручиваем к началу страницы (к якорю)
          document.getElementById("page").scrollIntoView({
            behavior: "smooth",
            block: "start",
          });
        });
      });

      // Свайп для мобильных
      let touchStartX = 0;
      let touchEndX = 0;

      document.addEventListener(
        "touchstart",
        function (e) {
          if (getDeviceType() !== "desktop") {
            touchStartX = e.changedTouches[0].screenX;
          }
        },
        false
      );

      document.addEventListener(
        "touchend",
        function (e) {
          if (getDeviceType() !== "desktop") {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
          }
        },
        false
      );

      function handleSwipe() {
        const swipeThreshold = 50;

        if (touchEndX < touchStartX - swipeThreshold) {
          next();
        }

        if (touchEndX > touchStartX + swipeThreshold) {
          prev();
        }
      }

      // ИНТЕРАКТИВНАЯ ГАЛЕРЕЯ
      const galleryContainer = document.querySelector(".gallery-container");
      const learnMoreBtn = document.getElementById("learnMoreBtn");
      const textContents = document.querySelectorAll(".text-content");
      const hiddenPhotos = document.querySelectorAll(".hidden-photo");

      let currentTextIndex = 0;
      let photosActive = false;

      // Функция показа/скрытия текста
      function showText(index) {
        // Скрываем все тексты
        textContents.forEach((text) => {
          text.classList.remove("active");
        });

        // Показываем нужный текст
        textContents[index].classList.add("active");
        currentTextIndex = index;

        // Обновляем индикаторы галереи
        updateGalleryIndicators();

        // Обновляем кнопки в зависимости от состояния
        updateButtonsForCurrentText();
      }

      // Функция обновления кнопок для текущего текста
      function updateButtonsForCurrentText() {
        const currentText = textContents[currentTextIndex];
        const currentLearnMoreBtn =
          currentText.querySelector(".learn-more-btn");
        const currentNavButtons = currentText.querySelector(".nav-buttons");

        if (photosActive) {
          // Если фотографии активны, скрываем кнопку "Узнать больше" и показываем навигацию
          if (currentLearnMoreBtn) {
            currentLearnMoreBtn.style.display = "none";
          }

          if (currentNavButtons) {
            currentNavButtons.classList.add("show");
          }
        } else {
          // Если фотографии не активны
          if (currentTextIndex === 0) {
            // Для первого текста показываем только кнопку "Узнать больше"
            if (currentLearnMoreBtn) {
              currentLearnMoreBtn.style.display = "block";
            }

            if (currentNavButtons) {
              currentNavButtons.classList.remove("show");
            }
          } else {
            // Для остальных текстов показываем обе кнопки
            if (currentLearnMoreBtn) {
              currentLearnMoreBtn.style.display = "block";
            }

            if (currentNavButtons) {
              currentNavButtons.classList.add("show");
            }
          }
        }
      }

      // Функция обновления индикаторов галереи
      function updateGalleryIndicators() {
        indicators.forEach((indicator, index) => {
          if (indicator.dataset.index == currentTextIndex) {
            indicator.classList.add("active");
          } else {
            indicator.classList.remove("active");
          }
        });
      }

      // Функция активации фотографий
      function activatePhotos() {
        if (!photosActive) {
          // Показываем фотографии
          galleryContainer.classList.add("photos-active");
          photosActive = true;

          // Обновляем кнопки для текущего текста
          updateButtonsForCurrentText();
        }
      }

      // Функция деактивации фотографий
      function deactivatePhotos() {
        if (photosActive) {
          // Скрываем фотографии
          galleryContainer.classList.remove("photos-active");
          photosActive = false;

          // Обновляем кнопки для текущего текста
          updateButtonsForCurrentText();
        }
      }

      // Инициализация галереи
      if (galleryContainer && learnMoreBtn) {
        // Показываем первый текст
        showText(0);

        // Обработчик для кнопки "Узнать больше"
        document.querySelectorAll(".learn-more-btn").forEach((btn, index) => {
          btn.addEventListener("click", function (e) {
            e.stopPropagation();
            activatePhotos();
          });
        });

        // Обработчики для кнопки "Назад"
        document.querySelectorAll(".prev-text-btn").forEach((btn) => {
          btn.addEventListener("click", function (e) {
            e.stopPropagation();
            let newIndex = currentTextIndex - 1;
            if (newIndex < 0) newIndex = textContents.length - 1;
            showText(newIndex);
          });
        });

        // Обработчики для кнопки "Вперед"
        document.querySelectorAll(".next-text-btn").forEach((btn) => {
          btn.addEventListener("click", function (e) {
            e.stopPropagation();
            let newIndex = currentTextIndex + 1;
            if (newIndex >= textContents.length) newIndex = 0;
            showText(newIndex);
          });
        });

        // Закрытие фотографий по клику на любую фотографию
        hiddenPhotos.forEach((photo) => {
          photo.addEventListener("click", function (e) {
            e.stopPropagation();
            deactivatePhotos();
          });
        });

        // Закрытие фотографий по клику вне галереи
        document.addEventListener("click", function (e) {
          if (photosActive && !galleryContainer.contains(e.target)) {
            deactivatePhotos();
          }
        });

        // Закрытие фотографий по нажатию Escape
        document.addEventListener("keydown", function (e) {
          if (e.key === "Escape" && photosActive) {
            deactivatePhotos();
          }
        });
      }

      // Код для обработки формы обратной связи
      document.addEventListener("DOMContentLoaded", function () {
        const contactForm = document.getElementById("contactForm");
        const submitBtn = document.getElementById("submitBtn");
        const resetBtn = document.getElementById("resetBtn");
        const formMessage = document.getElementById("formMessage");

        function validateEmail(email) {
          const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          return re.test(email);
        }

        function showMessage(text, type) {
          formMessage.textContent = text;
          formMessage.className = "message " + type;
          formMessage.style.display = "block";

          if (type === "success" || type === "error") {
            setTimeout(() => {
              formMessage.style.display = "none";
            }, 5000);
          }
        }

        resetBtn.addEventListener("click", function () {
          contactForm.reset();
          formMessage.style.display = "none";
        });

        async function handleSubmit(event) {
          event.preventDefault();

          const name = document.getElementById("name").value.trim();
          const email = document.getElementById("email").value.trim();
          const message = document.getElementById("message").value.trim();

          if (!name || !email || !message) {
            showMessage("Пожалуйста, заполните все поля", "error");
            return;
          }

          if (!validateEmail(email)) {
            showMessage("Введите корректный email адрес", "error");
            return;
          }

          showMessage("Отправка сообщения...", "loading");
          submitBtn.disabled = true;

          try {
            const nameField = document.createElement("input");
            nameField.type = "hidden";
            nameField.name = "Имя";
            nameField.value = name;
            contactForm.appendChild(nameField);

            const response = await fetch(contactForm.action, {
              method: "POST",
              body: new FormData(contactForm),
              headers: {
                Accept: "application/json",
              },
            });

            contactForm.removeChild(nameField);

            if (response.ok) {
              showMessage(
                "✅ Сообщение успешно отправлено! Я отвечу вам в ближайшее время.",
                "success"
              );
              contactForm.reset();
            } else {
              showMessage(
                "❌ Произошла ошибка при отправке. Попробуйте еще раз.",
                "error"
              );
            }
          } catch (error) {
            showMessage(
              "❌ Ошибка сети. Пожалуйста, проверьте соединение.",
              "error"
            );
          } finally {
            submitBtn.disabled = false;
          }
        }

        contactForm.addEventListener("submit", handleSubmit);
        submitBtn.addEventListener("click", function (event) {
          if (!contactForm.checkValidity()) {
            contactForm.reportValidity();
            return;
          }
          handleSubmit(event);
        });
      });

      // Инициализация
      window.addEventListener("load", () => {
        arrangeBlocks();
      });

      // Обработка изменения размера окна
      window.addEventListener("resize", () => {
        arrangeBlocks();
      });
    </script>
  </body>
</html>
